<%- include("../../views/partials/user/header") %>
    <style>
        body {
            background-color: #ededed;
            /* Dark background */
            color: #171717;
            /* Light text for contrast */
        }

        #formm {
            background-color: #a7a4a4;
            /* Darker gray for form container */
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            /* Subtle shadow for depth */
        }

        .form-control {
            background-color: #6c757d;
            /* Dark input background */
            color: #1a1a1a;
            /* Light text in inputs */
            border: none;
        }

        .form-control:focus {
            background-color: #6e6e6e;
            /* Slightly darker on focus */
            color: #f8f9fa;
            border: 1px solid #ced4da;
            /* Visible border on focus */
            box-shadow: none;
        }

        button {
            background-color: #007bff;
            /* Bootstrap primary color */
            border: none;
        }

        button:hover {
            background-color: #0056b3;
            /* Darker blue on hover */
        }

        input.form-control {
            color: #000;
            /* Ensure text is black */
            background-color: #c8c8c8;
            /* Light grey background for better visibility */
            border: 1px solid #000000;
            /* Add a visible border */
        }

        input.form-control:focus {
            color: #000;
            /* Text remains visible on focus */
            background-color: #fff;
            /* Slightly brighter background */
            border-color: #80bdff;
            /* Blue border on focus */
            outline: none;
            /* Remove default outline */
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
            /* Subtle focus glow */
        }

        label {
            color: #333;
            /* Ensure labels are visible */
        }
    </style>


<body>
    <div class="container mt-5" id="formm">
        <h2 class="text-center mb-4">Address Form</h2>
        <form id="addressForm" action="/editAddress?id=<%=address._id%>" method="post">
            <div class="form-group">
                <label for="addressType">Address Type</label>
                <input type="text" class="form-control" id="addressType" name="addressType"
                   value="<%=address.addressType %>" >
            </div>

            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" class="form-control" id="name" name="name" value="<%=address.name %>"  >
            </div>

            <div class="form-group">
                <label for="city">City</label>
                <input type="text" class="form-control" id="city" name="city" value="<%=address.city %>"  >
            </div>

            <div class="form-group">
                <label for="landmark">Landmark</label>
                <input type="text" class="form-control" id="landmark" name="landMark" value="<%=address.landMark %>"  >
            </div>

            <div class="form-group">
                <label for="state">State</label>
                <input type="text" class="form-control" id="state" name="state" value="<%=address.state %>"  >
            </div>

            <div class="form-group">
                <label for="pincode">Pincode</label>
                <input type="number" class="form-control" id="pincode" name="pincode" value="<%=address.pincode %>" >
            </div>

            <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" class="form-control" id="phone" name="phone" value="<%=address.phone %>"  >
            </div>

            <div class="form-group">
                <label for="altPhone">Alternate Phone Number</label>
                <input type="tel" class="form-control" id="altPhone" name="altPhone" value="<%=address.altPhone %>" >
            </div>

            <button type="submit" class="btn btn-primary btn-block">Submit</button>
        </form>
    </div>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.4.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        document.getElementById('addressForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const addressType = document.getElementById('addressType').value.trim();
            const name = document.getElementById('name').value.trim();
            const city = document.getElementById('city').value.trim();
            const landmark = document.getElementById('landmark').value.trim();
            const state = document.getElementById('state').value.trim();
            const pincode = document.getElementById('pincode').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const altPhone = document.getElementById('altPhone').value.trim();

            if (!addressType || !name || !city || !landmark || !state || !pincode || !phone || !altPhone) {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'All fields are required!',
                });
                return;
            }

            if (pincode.length !== 6) {
                Swal.fire({
                    icon: 'error',
                    title: 'Invalid Pincode',
                    text: 'Pincode must be 6 digits long.',
                });
                return;
            }

            if (!/^\d{10}$/.test(phone)) {
                Swal.fire({
                    icon: 'error',
                    title: 'Invalid Phone Number',
                    text: 'Phone number must be 10 digits long.',
                });
                return;
            }

            if (!/^\d{10}$/.test(altPhone)) {
                Swal.fire({
                    icon: 'error',
                    title: 'Invalid Alternate Phone Number',
                    text: 'Alternate phone number must be 10 digits long.',
                });
                return;
            }

            // If all validations pass, submit the form
            Swal.fire({
                icon: 'success',
                title: 'Success!',
                text: 'Form submitted successfully.',
            }).then(() => {
                this.submit(); // Submit the form
            });
        });
    </script>
</body>
    <%- include("../partials/user/footer.ejs") -%>