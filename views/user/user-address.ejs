<%- include("../../views/partials/user/header") %>
    <style>
        body {
            background-color: #ededed;
            /* Dark background */
            color: #171717;
            /* Light text for contrast */
        }

        #formm {
            background-color: #a7a4a4;
            /* Darker gray for form container */
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            /* Subtle shadow for depth */
        }

        .form-control {
            background-color: #6c757d;
            /* Dark input background */
            color: #1a1a1a;
            /* Light text in inputs */
            border: none;
        }

        .form-control:focus {
            background-color: #6e6e6e;
            /* Slightly darker on focus */
            color: #f8f9fa;
            border: 1px solid #ced4da;
            /* Visible border on focus */
            box-shadow: none;
        }

        button {
            background-color: #007bff;
            /* Bootstrap primary color */
            border: none;
        }

        button:hover {
            background-color: #0056b3;
            /* Darker blue on hover */
        }

        input.form-control {
            color: #000;
            /* Ensure text is black */
            background-color: #c8c8c8;
            /* Light grey background for better visibility */
            border: 1px solid #000000;
            /* Add a visible border */
        }

        input.form-control:focus {
            color: #000;
            /* Text remains visible on focus */
            background-color: #fff;
            /* Slightly brighter background */
            border-color: #80bdff;
            /* Blue border on focus */
            outline: none;
            /* Remove default outline */
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
            /* Subtle focus glow */
        }

        label {
            color: #333;
            /* Ensure labels are visible */
        }
    </style>


    <body>
        <div class="container mt-5" id="formm">
            <h2 class="text-center mb-4">Address Form</h2>
            <form id="addressForm" action="/addAddress" method="post" novalidate>
                <div class="form-group">
                    <label for="addressType">Address Type</label>
                    <input type="text" class="form-control" id="addressType" name="addressType"
                        placeholder="e.g., Home, Office">
                    <small id="addressTypeError" class="text-danger" style="display: none;">Address Type is
                        required.</small>
                </div>

                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" class="form-control" id="name" name="name" placeholder="Full Name">
                    <small id="nameError" class="text-danger" style="display: none;">Name is required.</small>
                </div>

                <div class="form-group">
                    <label for="city">City</label>
                    <input type="text" class="form-control" id="city" name="city" placeholder="City">
                    <small id="cityError" class="text-danger" style="display: none;">City is required.</small>
                </div>

                <div class="form-group">
                    <label for="landmark">Landmark</label>
                    <input type="text" class="form-control" id="landmark" name="landMark" placeholder="Landmark">
                    <small id="landmarkError" class="text-danger" style="display: none;">Landmark is required.</small>
                </div>

                <div class="form-group">
                    <label for="state">State</label>
                    <input type="text" class="form-control" id="state" name="state" placeholder="State">
                    <small id="stateError" class="text-danger" style="display: none;">State is required.</small>
                </div>

                <div class="form-group">
                    <label for="pincode">Pincode</label>
                    <input type="number" class="form-control" id="pincode" name="pincode" placeholder="Pincode"
                        required>
                    <small id="pincodeError" class="text-danger" style="display: none;">Pincode is required.</small>
                </div>

                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" class="form-control" id="phone" name="phone" placeholder="Phone Number">
                    <small id="phoneError" class="text-danger" style="display: none;">Phone Number is required.</small>
                </div>

                <div class="form-group">
                    <label for="altPhone">Alternate Phone Number</label>
                    <input type="tel" class="form-control" id="altPhone" name="altPhone"
                        placeholder="Alternate Phone Number" required>
                    <small id="altPhoneError" class="text-danger" style="display: none;">Alternate Phone Number is
                        required.</small>
                </div>

                <button type="submit" class="btn btn-primary btn-block">Submit</button>
            </form>

        </div>

        <!-- Bootstrap JS and dependencies -->
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.4.4/dist/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

        <script>
            document.getElementById("addressForm").addEventListener("submit", function (event) {
                event.preventDefault(); // Prevent form submission

                // Form fields and corresponding error elements
                const fields = [
                    { id: "addressType", errorId: "addressTypeError", message: "Address Type is required." },
                    { id: "name", errorId: "nameError", message: "Name is required." },
                    { id: "city", errorId: "cityError", message: "City is required." },
                    { id: "landmark", errorId: "landmarkError", message: "Landmark is required." },
                    { id: "state", errorId: "stateError", message: "State is required." },
                    { id: "pincode", errorId: "pincodeError", message: "Pincode must be a 6-digit number." },
                    { id: "phone", errorId: "phoneError", message: "Phone Number must be a 10-digit number." },
                    { id: "altPhone", errorId: "altPhoneError", message: "Alternate Phone Number must be a 10-digit number." },
                ];

                let isValid = true;

                // Validation rules
                const regexRules = {
                    phone: /^\d{10}$/, // Exactly 10 digits
                    altPhone: /^\d{10}$/, // Exactly 10 digits
                    pincode: /^\d{6}$/, // Exactly 6 digits
                };

                // Validate each field
                fields.forEach(({ id, errorId, message }) => {
                    const input = document.getElementById(id);
                    const errorElement = document.getElementById(errorId);

                    if (!input.value.trim()) {
                        // Show error message for empty fields
                        errorElement.textContent = message;
                        errorElement.style.display = "block";
                        isValid = false;
                    } else if (regexRules[id] && !regexRules[id].test(input.value)) {
                        // Show error message for invalid formats
                        errorElement.textContent = message;
                        errorElement.style.display = "block";
                        isValid = false;
                    } else {
                        // Hide error message for valid inputs
                        errorElement.style.display = "none";
                    }
                });

                // If the form is valid, allow submission
                if (isValid) {
                    this.submit(); // Submit the form
                }
            });


        </script>
    </body>
    <%- include("../partials/user/footer.ejs") -%>